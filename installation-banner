#!/bin/bash

# Check if running as root
if [[ $EUID -ne 0 ]]; then
  echo "Please run this script as root or with sudo."
  exit 1
fi

# Install nano if not installed
if ! command -v nano &> /dev/null; then
  echo "nano not found. Installing nano..."
  if command -v dnf &> /dev/null; then
    dnf install -y nano
  elif command -v yum &> /dev/null; then
    yum install -y nano
  else
    echo "Package manager not found. Please install nano manually."
    exit 1
  fi
else
  echo "nano is already installed."
fi

# Create the banner script with purple color
cat <<'EOF' > /etc/profile.d/webdeployers-banner.sh
#!/bin/bash

PURPLE='\033[0;35m'
RESET='\033[0m'

cat <<BANNEREOF
${PURPLE}
 __       __  _______  
|  \  _  |  \|       \ 
| $$ / \ | $$| $$$$$$$\
| $$/  $\| $$| $$  | $$
| $$  $$$\ $$| $$  | $$
| $$ $$\$$\$$| $$  | $$
| $$$$  \$$$$| $$__/ $$
| $$$    \$$$| $$    $$
 \$$      \$$ \$$$$$$$ 

webdeployers portable server
${RESET}
BANNEREOF
EOF

# Make banner script executable
chmod +x /etc/profile.d/webdeployers-banner.sh

echo "Installation complete. The banner will show on next login."
